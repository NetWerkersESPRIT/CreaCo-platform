{% extends 'base.html.twig' %}

{% block title %}Edit Event{% endblock %}
{% block page_title %}Edit Event{% endblock %}

{% block body %}
<div class="w-full max-w-full px-3 mt-0 mb-6 md:mb-0 md:w-1/2 md:flex-none lg:w-2/3 lg:flex-none mx-auto">
    <div class="border-black/12.5 shadow-soft-xl relative flex min-w-0 flex-col break-words rounded-2xl border-0 border-solid bg-white bg-clip-border">
        <div class="border-black/12.5 mb-0 rounded-t-2xl border-b-0 border-solid bg-white p-6 pb-0">
            <div class="flex items-center">
                <p class="mb-0 font-sans font-semibold leading-normal text-sm">Edit Event Details</p>
            </div>
        </div>
        <div class="flex-auto p-6">
            {{ form_start(form, {'attr': {'class': 'w-full', 'novalidate': 'novalidate'}}) }}
            
              <div class="flex flex-wrap -mx-3">
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Event Name</label>
                        {{ form_widget(form.name, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.name) }}</div>
                    </div>
                </div>
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Organizer</label>
                        {{ form_widget(form.organizer, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.organizer) }}</div>
                    </div>
                </div>
            </div>

            <div class="flex flex-wrap -mx-3">
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Category</label>
                        {{ form_widget(form.category, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.category) }}</div>
                    </div>
                </div>
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Type</label>
                        {{ form_widget(form.type, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.type) }}</div>
                    </div>
                </div>
            </div>

            <div class="flex flex-wrap -mx-3">
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Date</label>
                        {{ form_widget(form.date, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.date) }}</div>
                    </div>
                </div>
                 <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0">
                    <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Time</label>
                        {{ form_widget(form.time, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.time) }}</div>
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Description</label>
                {{ form_widget(form.description, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none', 'rows': '3'}}) }}
                <div class="text-red-500 text-xs mt-1">{{ form_errors(form.description) }}</div>
            </div>

            <div class="mb-4">
                 <h6 class="font-bold text-xs text-slate-700 mt-4 mb-2">Location / Online Details</h6>
            </div>

            <div class="flex flex-wrap -mx-3">
                <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0" id="address-container">
                     <div class="mb-4">
                         <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Address (if presentielle)</label>
                         {{ form_widget(form.address, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                         <div class="text-red-500 text-xs mt-1">{{ form_errors(form.address) }}</div>
                     </div>
                </div>
                 <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0" id="google-maps-container">
                     <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Google Maps Link</label>
                        {{ form_widget(form.googleMapsLink, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.googleMapsLink) }}</div>
                     </div>
                </div>
            </div>

            <div class="flex flex-wrap -mx-3">
                 <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0" id="platform-container">
                     <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Platform (if online)</label>
                        {{ form_widget(form.platform, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.platform) }}</div>
                     </div>
                </div>
                 <div class="w-full max-w-full px-3 shrink-0 md:w-6/12 md:flex-0" id="meeting-link-container">
                     <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Meeting Link</label>
                        {{ form_widget(form.meetingLink, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.meetingLink) }}</div>
                     </div>
                </div>
            </div>

            <div class="flex flex-wrap -mx-3">
                <div class="w-full max-w-full px-3 shrink-0 md:w-1/3 md:flex-0" id="capacity-container">
                     <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Capacity</label>
                        {{ form_widget(form.capacity, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.capacity) }}</div>
                     </div>
                </div>
                 <div class="w-full max-w-full px-3 shrink-0 md:w-2/3 md:flex-0">
                     <div class="mb-4">
                        <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Contact Info</label>
                        {{ form_widget(form.contact, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                        <div class="text-red-500 text-xs mt-1">{{ form_errors(form.contact) }}</div>
                     </div>
                </div>
            </div>
            
             <div class="mb-4">
                 <div class="min-h-6 pl-6.92 mb-0.5 block">
                     {{ form_widget(form.isForAllUsers, {'attr': {'class': 'w-4.92 h-4.92 ease-soft -ml-6.92 rounded-1.4 checked:bg-gradient-to-tl checked:from-gray-900 checked:to-slate-800 after:text-xxs after:font-awesome after:duration-250 after:ease-soft-in-out duration-250 relative float-left mt-1 cursor-pointer appearance-none border border-solid border-slate-200 bg-white bg-contain bg-center bg-no-repeat align-top transition-all after:absolute after:flex after:h-full after:w-full after:items-center after:justify-center after:text-white after:opacity-0 after:content-[\'\f00c\'] checked:border-0 checked:border-transparent checked:bg-transparent checked:after:opacity-100'}}) }}
                    <label class="inline-block mb-0 ml-1 font-normal cursor-pointer select-none text-sm text-slate-700">Is for all users</label>
                 </div>
            </div>

            {# Target Users #}
             <div class="mb-4" id="target-users-section" style="display: none;">
                <label class="inline-block mb-2 ml-1 font-bold text-xs text-slate-700">Select Target Users</label>
                {{ form_widget(form.targetUsers, {'attr': {'class': 'focus:shadow-soft-primary-outline min-h-unset text-sm leading-5.6 ease-soft block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 outline-none transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none'}}) }}
                <div class="text-red-500 text-xs mt-1">{{ form_errors(form.targetUsers) }}</div>
            </div>


            <div class="text-center">
                 <button type="button" onclick="window.location='{{ path('event_list') }}'" class="inline-block px-6 py-3 mt-6 mb-2 font-bold text-center text-white uppercase align-middle transition-all bg-transparent border-0 rounded-lg cursor-pointer active:opacity-85 hover:scale-102 hover:shadow-soft-xs leading-pro text-xs ease-soft-in tracking-tight-soft shadow-soft-md bg-150 bg-x-25 bg-gradient-to-tl from-slate-600 to-slate-300 mr-2">Cancel</button>
                <button type="submit" class="inline-block px-6 py-3 mt-6 mb-2 font-bold text-center text-white uppercase align-middle transition-all bg-transparent border-0 rounded-lg cursor-pointer active:opacity-85 hover:scale-102 hover:shadow-soft-xs leading-pro text-xs ease-soft-in tracking-tight-soft shadow-soft-md bg-150 bg-x-25 bg-gradient-to-tl from-purple-700 to-pink-500">Update Event</button>
            </div>
            
            <div class="text-center mt-2">
                 <a href="{{ path('event_delete', {'id': form.vars.value.id}) }}" class="text-red-500 text-xs font-bold hover:text-red-700" onclick="return confirm('Are you sure you want to delete this event?');">Delete Event</a>
            </div>
            
            {{ form_end(form) }}
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const isForAllUsersCheckbox = document.querySelector('input[name="{{ form.isForAllUsers.vars.full_name }}"]');
        const targetUsersSection = document.getElementById('target-users-section');

        function toggleTargetUsers() {
            if (isForAllUsersCheckbox.checked) {
                targetUsersSection.style.display = 'none';
            } else {
                targetUsersSection.style.display = 'block';
            }
        }

        // Initial check
        toggleTargetUsers();

        // Listen for changes
        isForAllUsersCheckbox.addEventListener('change', toggleTargetUsers);
    });
</script>
{% endblock %}

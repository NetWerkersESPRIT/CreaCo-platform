{% extends 'base.html.twig' %}

{% block title %}Notifications
{% endblock %}
{% block page_title %}Notifications
{% endblock %}
{% block breadcrumb %}User / Notifications
{% endblock %}

{% block body %}
	<div class="flex flex-wrap -mx-3">
		<div class="flex-none w-full max-w-full px-3">
			<div class="relative flex flex-col min-w-0 mb-6 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border">
				<div class="p-6 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl flex items-center justify-between">
					<h6>Your Notifications</h6>
					{% if notifications|length > 0 %}
						<form action="{{ path('app_notifications_mark_all_seen') }}" method="POST" class="m-0">
							<button type="submit" class="px-6 py-2 text-xs font-bold text-slate-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all uppercase border-0 cursor-pointer">
								Mark all as seen
							</button>
						</form>
					{% endif %}
				</div>
				<div class="flex-auto px-0 pt-0 pb-2">
					<div class="p-0 overflow-x-auto">
						<table class="items-center w-full mb-0 align-top border-gray-200 text-slate-500">
							<tbody>
								{% for notification in notifications %}
									<tr onclick="window.location.href='{{ path('app_notification_read', {id: notification.id}) }}'" class="hover:bg-gray-50/80 transition-all cursor-pointer group {{ notification.isRead ? 'opacity-60' : 'bg-white' }}">
										<td class="p-4 align-middle bg-transparent border-b shadow-transparent relative">
											{% if not notification.isRead %}
												<div class="absolute left-1 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-gradient-to-tl from-purple-700 to-pink-500 rounded-full shadow-soft-md"></div>
											{% endif %}
											<div class="flex px-2 py-1">
												<div class="mr-4 flex items-center">
													<div class="flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-tl
																													{% if 'approved' in notification.message|lower %}from-green-600 to-lime-400
																													{% elseif 'refused' in notification.message|lower %}from-red-600 to-rose-400
																													{% elseif 'waiting' in notification.message|lower or 'pending' in notification.message|lower %}from-orange-500 to-yellow-400
																													{% else %}from-purple-700 to-pink-500{% endif %}
																													text-white shadow-soft-2xl group-hover:scale-110 transition-transform">
														<i class="fas
																														{% if 'approved' in notification.message|lower %}fa-check-circle
																														{% elseif 'refused' in notification.message|lower %}fa-times-circle
																														{% elseif 'waiting' in notification.message|lower or 'pending' in notification.message|lower %}fa-clock
																														{% else %}fa-bell{% endif %}"></i>
													</div>
												</div>
												<div class="flex flex-col justify-center">
													<h6 class="mb-0 text-sm {{ notification.isRead ? 'font-normal text-slate-500' : 'font-bold text-slate-700' }} leading-tight">
														{{ notification.message }}
													</h6>
													<p class="mb-0 text-[10px] font-bold uppercase tracking-wider text-slate-400 mt-1">
														<i class="far fa-clock mr-1"></i>
														{{ notification.createdAt|date('M j, Y â€¢ g:i a') }}
													</p>
												</div>
											</div>
										</td>
										<td class="p-4 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent text-right">
											<i class="fas fa-chevron-right text-slate-300 opacity-0 group-hover:opacity-100 transition-opacity"></i>
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="2" class="p-12 text-center text-slate-400 font-bold uppercase tracking-wider text-xs">
											<i class="fas fa-bell-slash text-5xl mb-4 opacity-20 block"></i>
											No notifications yet
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

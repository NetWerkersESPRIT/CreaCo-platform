{% extends 'base.html.twig' %}

{% block title %}CreaCo -
	{{ category.nom }}
{% endblock %}

{% block body %}
	<div
		class="w-full px-6 py-6 mx-auto">

		<!-- Breadcrumbs -->
		<nav class="relative flex flex-wrap items-center justify-between px-0 py-2 mx-6 transition-all shadow-none duration-250 ease-soft-in rounded-2xl lg:flex-nowrap lg:justify-start">
			<div class="flex items-center justify-between w-full px-4 py-1 mx-auto flex-wrap-inherit">
				<nav>
					<ol class="flex flex-wrap pt-1 mr-12 bg-transparent rounded-lg sm:mr-16">
						<li class="text-sm leading-normal">
							<a class="opacity-50 text-slate-700" href="{{ path('app_front_home') }}">Formations</a>
						</li>
						<li class="text-sm pl-2 capitalize leading-normal text-slate-700 before:float-left before:pr-2 before:text-gray-600 before:content-['/']" aria-current="page">{{ category.nom }}</li>
					</ol>
					<h6 class="mb-0 font-bold capitalize">{{ category.nom }}</h6>
				</nav>
			</div>
		</nav>

		<!-- Search & Filter -->
		<div class="flex flex-wrap -mx-3 mb-6">
			<div class="w-full max-w-full px-3">
				<div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border">
					<div class="p-6 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl">
						<h6 class="mb-1">{{ category.nom }}</h6>
						<p class="text-sm leading-normal text-slate-500">{{ category.description }}</p>
					</div>
					<div class="flex-auto p-6">
						<form method="get" class="flex flex-wrap gap-4 items-center">
							<div class="relative flex-grow">
								<span class="text-sm ease-soft leading-5.6 absolute z-50 -ml-px flex h-full items-center whitespace-nowrap rounded-lg rounded-tr-none rounded-br-none border border-r-0 border-transparent bg-transparent py-2 px-2.5 text-center font-normal text-slate-500 transition-all">
									<i class="fas fa-search" aria-hidden="true"></i>
								</span>
								<input type="text" name="search" value="{{ search ?? '' }}" class="pl-8.75 text-sm focus:shadow-soft-primary-outline ease-soft w-full leading-5.6 relative -ml-px block min-w-0 flex-auto rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding py-2 pr-3 text-gray-700 transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none focus:transition-shadow" placeholder="Rechercher un cours..."/>
							</div>
							<select name="sort" onchange="this.form.submit()" class="text-sm focus:shadow-soft-primary-outline ease-soft leading-5.6 relative -ml-px block min-w-0 flex-auto rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding py-2 pr-3 text-gray-700 transition-all placeholder:text-gray-500 focus:border-fuchsia-300 focus:outline-none focus:transition-shadow cursor-pointer">
								<option value="date_de_creation_DESC" {{ (current_sort ~ '_' ~ current_order) == 'date_de_creation_DESC' ? 'selected' : '' }}>Plus récents</option>
								<option value="titre_ASC" {{ (current_sort ~ '_' ~ current_order) == 'titre_ASC' ? 'selected' : '' }}>Nom (A-Z)</option>
							</select>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- Courses Grid -->
		<div class="flex flex-wrap -mx-3">
			{% for course in courses %}
				<div class="w-full max-w-full px-3 mb-6 sm:w-1/2 lg:w-1/3">
					<div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border h-full hover:shadow-soft-2xl transition-all duration-300 group">
						<div class="relative h-48 overflow-hidden rounded-t-2xl">
							{% if course.image %}
								<img src="{{ course.image }}" alt="{{ course.titre }}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
							{% else %}
								<div class="w-full h-full flex items-center justify-center bg-gradient-to-tl from-gray-900 to-slate-800 text-white">
									<i class="fas fa-graduation-cap text-4xl"></i>
								</div>
							{% endif %}
							<div class="absolute top-0 right-0 m-4 px-2 py-1 rounded bg-white shadow-soft-2xl">
								<span class="text-xs font-bold text-slate-700">{{ course.ressources|length }}
									<i class="fas fa-file-alt ml-1"></i>
								</span>
							</div>
						</div>
						<div class="flex-auto p-6">
							<h5 class="mb-2 font-bold">{{ course.titre }}</h5>
							<p class="mb-4 text-sm text-slate-500 leading-normal line-clamp-3">{{ course.description }}</p>

							<div class="flex items-center justify-between">
								<span class="text-xs font-semibold text-slate-400">
									<i class="fas fa-calendar-alt mr-1"></i>
									{{ course.dateDeCreation ? course.dateDeCreation|date('d/m/Y') : '-' }}
								</span>
								<a href="{{ path('app_front_course', {'id': course.id}) }}" class="inline-block px-4 py-2 font-bold text-center text-white uppercase align-middle transition-all bg-transparent border-0 rounded-lg cursor-pointer leading-pro text-xs ease-soft-in shadow-soft-md bg-150 bg-x-25 bg-gradient-to-tl from-purple-700 to-pink-500 hover:scale-102 active:opacity-85 hover:shadow-soft-xs tracking-tight-rem">
									Accéder
								</a>
							</div>
						</div>
					</div>
				</div>
			{% else %}
				<div class="w-full max-w-full px-3">
					<div class="text-center p-12 bg-white shadow-soft-xl rounded-2xl border-2 border-dashed border-gray-200">
						<i class="ni ni-hat-3 text-4xl text-slate-300 mb-4"></i>
						<p class="text-lg font-semibold text-slate-500">Aucun cours disponible dans cette catégorie.</p>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
